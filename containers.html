<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8"/>
  <title>Docker Jumpstart</title>

  <!-- Styling -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='assets/html.css' rel='stylesheet' type='text/css'>

  <!-- JavaScript -->
  <!-- CSS is loaded before JavaScript in order to improve user experience -->
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript"
          src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js"></script>
</head>

<body>
<header>
  <div id="buttons">
    <i id="link-toc" class="fa fa-bars"></i>
  </div>

  <div class="heading">
    <h1><a href="/docker-jumpstart">Docker Jumpstart by Andrew Odewahn</a></h1>

    <div class="social-buttons">
      <div class="twitter">
        <a href="https://twitter.com/share" class="twitter-share-button" data-via="odewahn">Tweet</a>
        <script>!function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
            if (!d.getElementById(id)) {
              js = d.createElement(s);
              js.id = id;
              js.src = p + '://platform.twitter.com/widgets.js';
              fjs.parentNode.insertBefore(js, fjs);
            }
          }(document, 'script', 'twitter-wjs');</script>
      </div>
      <div class="github">
        <iframe src="http://ghbtns.com/github-btn.html?user=odewahn&repo=docker-jumpstart&type=watch"
                allowtransparency="true" frameborder="0" scrolling="0" width="62" height="20">&nbsp;</iframe>
      </div>
    </div>
  </div>

  <a href="https://github.com/odewahn/docker-jumpstart">
    <img src="https://s3.amazonaws.com/orm-atlas-media/fork-on-github.png" class="fork-on-github"/>
  </a>
</header>

<div id="flex-box">
  <section id="sidebar">
    

<div class="toc-element clearfix">
  <span class="fa fa-th fa-2x fa-border"></span> <a href="introduction.html">Introduction</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-laptop fa-2x fa-border"></span> <a href="boot2docker.html">Using boot2docker to run Docker on a Mac or Windows</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-align-justify fa-2x fa-border"></span> <a href="docker-images.html">Images: Layered filesystems</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-bolt fa-2x fa-border"></span> <a href="containers.html">Containers: Running instances of an Image</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-gears fa-2x fa-border"></span> <a href="example.html">Creating your own Docker Image</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-file-text-o fa-2x fa-border"></span> <a href="building-images-with-dockerfiles.html">Building images with Dockerfiles</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-cloud-upload fa-2x fa-border"></span> <a href="dockerhub.html">Sharing images on Docker Hub</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-bar-chart fa-2x fa-border"></span> <a href="ipython-notebook.html">Running Jupyter / IPython Notebooks on Docker for Mac/Windows</a>
</div>



<div class="toc-element clearfix">
  <span class="fa fa-book fa-2x fa-border"></span> <a href="additional-resources.html">Additional Resources</a>
</div>


  </section>

  <section id="content">
    <section id="content-body">

      <h1>Containers: Running instances of an Image</h1><p>A container is a running image that you start with the <code>docker run</code> command, like this:</p>
<pre><code class="language-console">$ docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
</code></pre>
<p>The command consists of:</p>
<ul>
<li>OPTIONS.  There are a LOT of options for the run command.  We&#39;ll cover this in a bit more depth in the next shortly. </li>
<li>IMAGE.  The name of the image that the container should start from.</li>
<li>COMMAND.  The command that should run <em>on the container when it starts</em>.  </li>
</ul>
<p>Let&#39;s try a simple command to start a new container using the latest version of Ubuntu.  Once this container starts, you&#39;ll be at a bash shell where you can do <code>cat /etc/os-release</code> to see the release information about the OS:</p>
<pre><code class="language-console">$ docker run -it ubuntu:latest /bin/bash
root@4afa46473802:/# cat /etc/os-release 
NAME=&quot;Ubuntu&quot;
VERSION=&quot;14.04.1 LTS, Trusty Tahr&quot;
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME=&quot;Ubuntu 14.04.1 LTS&quot;
VERSION_ID=&quot;14.04&quot;
HOME_URL=&quot;http://www.ubuntu.com/&quot;
SUPPORT_URL=&quot;http://help.ubuntu.com/&quot;
BUG_REPORT_URL=&quot;http://bugs.launchpad.net/ubuntu/&quot;
</code></pre>
<p>Next, type this command in your running container to make a simple change on the filesystem:</p>
<pre><code class="language-console">root@4afa46473802:/# echo &quot;hello world&quot; &gt; /tmp/hello.txt
</code></pre>
<p>Now that you&#39;ve verified the OS release and created a test file, here&#39;s a bit more detail about the options we&#39;ve used in the RUN command:</p>
<ul>
<li>The OPTIONS &quot;-it&quot; tell Docker to make the container interactive and provide a tty (i.e., attach a terminal)</li>
<li>The IMAGE is the &quot;ubuntu:latest&quot; image we pulled down.  Note the <em>repository:tag</em> format, which is used throughout docker.  By default, the &quot;latest&quot; tag is used, but if we were to use &quot;ubuntu:precise&quot; we&#39;d be using Ubuntu 12.04.</li>
<li>The COMMAND is &quot;/bin/bash&quot;, which starts a shell where you can log in</li>
</ul>
<p>The cool thing is that once you&#39;re in an interactive docker shell, you can do anything you want, such as installing packages (via apt-get), code bases (using git), or dependencies (using pip, gem, npm, or any other package manager du jour.)  You can then commit the container at any point to create a new image that has your changes.  </p>
<p>To see this in action, open a new terminal on your host machine and use &quot;docker ps&quot; command to see some information about the running container:</p>
<pre><code class="language-console">$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
4afa46473802        ubuntu:14.04        /bin/bash           17 hours ago        Up 39 seconds                           jolly_perlman
</code></pre>
<p>This command will tell you:</p>
<ul>
<li>The CONTAINER_ID, a unique identifier you can use to refer to the container in other commands (this is kind of like a process id in Linux)</li>
<li>The IMAGE that was used when the container started</li>
<li>The COMMAND used to start the container</li>
<li>The time the underlying image was CREATED</li>
<li>The uptime STATUS</li>
<li>The exposed ports (lot&#39;s more on this!)</li>
<li>A human readable NAME that you can use in place of the ID (this is something you can also assign yourself, which we&#39;ll get into shortly.)</li>
</ul>
<p>Now try the <code>docker diff</code> command:</p>
<pre><code class="language-console">$ docker diff jolly_perlman
C /tmp
A /tmp/hello.txt
</code></pre>
<p>As you can see, this command returns the changes that have happened on the filesystem, which in our case is that we&#39;ve changed the &quot;/tmp&quot; directory by adding a &quot;hello.txt&quot; file.  Now let&#39;s commit the changes we&#39;ve made into a new container:</p>
<pre><code class="language-console">$ docker commit -m &quot;Adding hello world&quot; jolly\_perlman hello\_docker
5af244124dd8656...
</code></pre>
<p>Taking another look at <code>docker images</code> shows the effect; we now have a new image called &quot;hello_docker&quot; that includes our &quot;/tmp/hello.txt&quot; file.  Taking a quick look at the container&#39;s history shows how our change added a whopping new 12 byte layer on top of the original layers of ubuntu:latest.</p>
<pre><code class="language-console">$ docker history hello_docker
IMAGE               CREATED             CREATED BY                                      SIZE
5af244124dd8        18 hours ago        /bin/bash                                       12 B
c4ff7513909d        2 days ago          /bin/sh -c #(nop) CMD [/bin/bash]               0 B
cc58e55aa5a5        2 days ago          /bin/sh -c apt-get update &amp;&amp; apt-get dist-upg   32.67 MB
0ea0d582fd90        2 days ago          /bin/sh -c sed -i &#39;s/^#\s*\(deb.*universe\)$/   1.895 kB
d92c3c92fa73        2 days ago          /bin/sh -c rm -rf /var/lib/apt/lists/*          0 B
9942dd43ff21        2 days ago          /bin/sh -c echo &#39;#!/bin/sh&#39; &gt; /usr/sbin/polic   194.5 kB
1c9383292a8f        2 days ago          /bin/sh -c #(nop) ADD file:c1472c26527df28498   192.5 MB
511136ea3c5a        14 months ago                                                       0 B
</code></pre>
<p>Finally, we can kill our docker process like this:</p>
<pre><code class="language-console">$ docker kill jolly_perlman
jolly_perlman
</code></pre>
<p>If you do <em>docker ps</em> again, you&#39;ll see that the process has stopped. </p>
<h2>Docker RUN Quick Reference</h2><p>The next chapter will provide much more detail on how to create your own containers and images using <em>docker run</em>, one of the most feature-rich commands in Docker.  Taken directly from <em>docker help</em>, this table is a useful quick reference you can refer to as you go further with Docker. </p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a, --attach=[]</td>
<td>Attach to stdin, stdout or stderr.</td>
</tr>
<tr>
<td>-c, --cpu-shares=0</td>
<td>CPU shares (relative weight)</td>
</tr>
<tr>
<td>--cidfile=&quot;&quot;</td>
<td>Write the container ID to the file</td>
</tr>
<tr>
<td>--cpuset=&quot;&quot;</td>
<td>CPUs in which to allow execution (0-3, 0,1)</td>
</tr>
<tr>
<td>-d, --detach=false</td>
<td>Detached mode: Run container in the background, print new container id</td>
</tr>
<tr>
<td>--dns=[]</td>
<td>Set custom dns servers</td>
</tr>
<tr>
<td>--dns-search=[]</td>
<td>Set custom dns search domains</td>
</tr>
<tr>
<td>-e, --env=[]</td>
<td>Set environment variables</td>
</tr>
<tr>
<td>--entrypoint=&quot;&quot;</td>
<td>Overwrite the default entrypoint of the image</td>
</tr>
<tr>
<td>--env-file=[]</td>
<td>Read in a line delimited file of ENV variables</td>
</tr>
<tr>
<td>--expose=[]</td>
<td>Expose a port from the container without publishing it to your host</td>
</tr>
<tr>
<td>-h, --hostname=&quot;&quot;</td>
<td>Container host name</td>
</tr>
<tr>
<td>-i, --interactive=false</td>
<td>Keep stdin open even if not attached</td>
</tr>
<tr>
<td>--link=[]</td>
<td>Add link to another container (name:alias)</td>
</tr>
<tr>
<td>--lxc-conf=[]</td>
<td>(lxc exec-driver only) Add custom lxc options --lxc-conf=&quot;lxc.cgroup.cpuset.cpus = 0,1&quot;</td>
</tr>
<tr>
<td>-m, --memory=&quot;&quot;</td>
<td>Memory limit (format: <number><optional unit>, where unit = b, k, m or g)</optional></number></td>
</tr>
<tr>
<td>--name=&quot;&quot;</td>
<td>Assign a name to the container</td>
</tr>
<tr>
<td>--net=&quot;bridge&quot;</td>
<td>Set the Network mode for the container</td>
</tr>
<tr>
<td></td>
<td>&#39;bridge&#39;: creates a new network stack for the container on the docker bridge</td>
</tr>
<tr>
<td></td>
<td>&#39;none&#39;: no networking for this container</td>
</tr>
<tr>
<td></td>
<td>&#39;container:<name or id>&#39;: reuses another container network stack</name></td>
</tr>
<tr>
<td></td>
<td>&#39;host&#39;: use the host network stack inside the container.  Note: the host mode gives the container full access to local system services such as D-bus and is therefore considered insecure.</td>
</tr>
<tr>
<td>-P, --publish-all=false</td>
<td>Publish all exposed ports to the host interfaces</td>
</tr>
<tr>
<td>-p, --publish=[]</td>
<td>Publish a container&#39;s port to the host</td>
</tr>
<tr>
<td></td>
<td>format: ip:hostPort:containerPort or ip::containerPort or hostPort:containerPort</td>
</tr>
<tr>
<td></td>
<td>(use &#39;docker port&#39; to see the actual mapping)</td>
</tr>
<tr>
<td>--privileged=false</td>
<td>Give extended privileges to this container</td>
</tr>
<tr>
<td>--rm=false</td>
<td>Automatically remove the container when it exits (incompatible with -d)</td>
</tr>
<tr>
<td>--sig-proxy=true</td>
<td>Proxify received signals to the process (even in non-tty mode). SIGCHLD is not proxied.</td>
</tr>
<tr>
<td>-t, --tty=false</td>
<td>Allocate a pseudo-tty</td>
</tr>
<tr>
<td>-u, --user=&quot;&quot;</td>
<td>Username or UID</td>
</tr>
<tr>
<td>-v, --volume=[]</td>
<td>Bind mount a volume (e.g., from the host: -v /host:/container, from docker: -v /container)</td>
</tr>
<tr>
<td>--volumes-from=[]</td>
<td>Mount volumes from the specified container(s)</td>
</tr>
<tr>
<td>-w, --workdir=&quot;&quot;</td>
<td>Working directory inside the container</td>
</tr>
</tbody>
</table>

      

<div class="nav-buttons">
<ul class="nav nav-pills">
   
      <li>
         <a href="docker-images.html" title="Images: Layered filesystems"> 
            <span class="glyphicon glyphicon-chevron-left"/> Previous
         </a>
      </li>
   
   
      <li>
         <a href="example.html" title="Creating your own Docker Image"> 
            Next <span class="glyphicon glyphicon-chevron-right"/>
         </a>
      </li>
   
</ul>
</div>


      <div id="disqus_thread"></div>

    </section>
  </section>
</div>

<footer>
  <img class="logo" src="http://orm-logo-service.herokuapp.com/webops/logo.svg"/>
</footer>

<script type="text/javascript">
  var toggled;
  $("#link-toc").click(function (event) {
    event.preventDefault();
    var sidebar = $("#sidebar");
    if (!toggled) {
      sidebar.transition({x: '25rem'});
      toggled = true;
    } else {
      sidebar.transition({x: '-25rem'});
      toggled = false;
    }
  });
</script>

<script type="text/javascript">
  $(document).ready(function () {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    window.disqus_shortname = 'dockerjumpstart'; // required: replace example with your forum shortname
    window.disqus_title = $('title').text() + " / " + $('h1').first().text();
    window.disqus_id = $('title').text() + " / " + $('section').first().attr('id');


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  });
</script>
</body>
</html>